<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ruby: Tax Estimator | DontTrustThisGuy.com</title>
    <meta name="description" content="The personal blog of Jim Jeffers.">
    <meta name="keywords"    content="Jim Jeffers, blog">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    
    <!-- <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png"> -->
    
    <link href="/stylesheets/normalize.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="/feed" rel="alternate" type="application/atom+xml" />
    
    <script src="/javascripts/modernizr.js"></script>
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script> -->
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3186798-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    <script type="text/javascript" src="http://use.typekit.com/knj2eit.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  </head>

  <body id="content">
    <article id="post">
  <header>
      <time datetime="2007-01-04" pubdate="pubdate">January 04, 2007</time>
      <h1><a href="/2007/01/04/ruby-tax-estimator" title="Permalink for Ruby: Tax Estimator">Ruby: Tax Estimator</a></h1>
  </header>

  <section id="body">
    <p>I got bored a couple of weeks ago and wanted to figure out how much I'd be paying in taxes depending on how much I made.  I wrote this little script in Ruby to give me a basic estimate of how much I'd owe.  You can use it at your own risk or make it better and share it with me!</p>
<h2>Here is the source:</h2>
<p>
<pre name="code" class="ruby">
# --------------------------------------------------------------------
# Amounts to analyze taxes for.
# --------------------------------------------------------------------
amounts = [40000, 50000, 60000]
pto = 80 # Specify amount of hours as integer

# --------------------------------------------------------------------
# Tax schedule for 2006 supplied by IRS
# (http://www.irs.gov/formspubs/article/0,,id=150856,00.html)
#
# Arizona tax information obtained from
# (http://dab.nfc.usda.gov/pubs/docs/taxformulas/formulas/statecitycounty/taxaz/taxaz.html)
# --------------------------------------------------------------------
tax_rates = [0.1, 0.15, 0.25, 0.28, 0.33, 0.35]
cutoff_levels = [0, 7550, 30650, 74200, 154800, 336550]
pre_tax_balances = [0, 755, 4220, 15107.5, 37675.5, 97653]
az_tax_rates = [0.1,0.19]
az_cutoff = 10000
work_hours = 52*40-pto

# --------------------------------------------------------------------
# Extend the numeric clas to accomodate formatting.
# --------------------------------------------------------------------
class Numeric
  def to_currency
    sprintf("$%0.2f", self)
  end

  def to_percent
    sprintf("%d%", self*100)
  end
end

# --------------------------------------------------------------------
# Calculate the amounts.
# --------------------------------------------------------------------
for amount in amounts

  # Determine the federal witholding bracket
  index = 0
  for cutoff in cutoff_levels
    if amount > cutoff then bracket = index end
    index += 1
  end

  # Determine the state tax withholding percentage
  (amount < az_cutoff) ? az_index = 0 : az_index = 1

  # Calculate withholding amounts and remaining income
  tax = (amount-cutoff_levels[bracket])*tax_rates[bracket] + pre_tax_balances[bracket]
  az_tax = tax * az_tax_rates[az_index]
  income = amount - tax - az_tax

  # Print out the results
  puts "---------------------------------------------------------------"
  puts "Income Analyses for #{amount.to_currency} w/ #{pto} hours of paid time off "
  puts "---------------------------------------------------------------"
  puts "This level of income would put you in the level #{bracket+1} tax bracket which charges #{tax_rates[bracket].to_percent}."
  puts "In addition this income qualifies for the #{az_tax_rates[az_index]} state income tax level."
  puts "Total income: #{income.to_currency} after #{tax.to_currency} in federal tax expenses and #{az_tax.to_currency} in state tax expenses.."
  puts "------------------------------\nPost Tax Income\n------------------------------"
  puts "Monthly income: #{(income/12).to_currency}"
  puts "Bi-Weekly income: #{(income/24).to_currency}"
  puts "------------------------------\nHourly Income\n------------------------------"
  puts "You are going to work #{work_hours} hours this year."
  puts "That will make up #{(work_hours.to_f/(365*12)).to_percent} percent of your active time."
  puts "Before tax your hourly income is #{(amount / work_hours).to_currency} taking paid time off into account."
  puts "After tax your hourly income is #{(income / work_hours).to_currency} taking paid time off into account."
  puts "\n\n"

end
</pre></pre></p>

  </section>
  
  <nav id="posts_nav">
    <ul>
      <li id="table_of_contents"><a href="/" title="Return to the table of contents."><img src="/images/icon_table_of_contents.svg" height="85" width="85"></a></li>
      
      <li id="previous"><a href="/2006/11/17/why-are-we-all-selling-out" title="Why are we all selling out?"><img src="/images/icon_previous.svg" height="85" width="85"></a></li>
      
      
      <li id="next"><a href="/2007/03/30/facing-reality-cleaning-out-and-the-horribleness-of-marketing" title="Facing Reality, Cleaning Out, and the Horribleness of Marketing."><img src="/images/icon_next.svg" height="85" width="85"></a></li>
      
    </ul>
  </nav>
</article>
  
    
    <footer>
      <p><a href="http://donttrustthisguy.com">DontTrustThisGuy.com</a> is authored by Jim Jeffers, a twenty-something web consultant currently residing in Phoenix, AZ. You will find random ramblings, discussions on web technologies, user interface design, programming, business, politics, and anything else that crosses his mind here.</p>
      <p>All content and images &copy; 2005-2012 <a href="http://jimjeffers.com">Jim Jeffers</a>.</p>
    </footer>
    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
