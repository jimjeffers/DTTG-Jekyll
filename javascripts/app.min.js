(function(){domready(function(){var e;setTimeout(function(){var e;if(Modernizr.svg){e=document.querySelector("#posts_nav");if(e!=null)return e.className="active"}},500);if(!document.querySelector(".dttg-archive"))return document.body.className="contained",e=new ArticleController,e.setAnalyticsCallback(function(e){return e==null&&(e={}),_gat._getTrackerByName()._trackPageview(e.pathname),_gat._getTrackerByName()._trackEvent(e.category,e.action)})})}).call(this),function(){this.Article=function(){function e(e){var t,n;e==null&&(e={}),this.href=e.href,n=document.createElement("div"),n.innerHTML=e.html,e["element"]!=null?this.element=e.element:this.element=n.querySelector("article"),t=this.element.querySelector("#table_of_contents"),t!=null&&(t.className="active"),n.querySelector("#next a")!=null&&(this.nextURL=n.querySelector("#next a").href),n.querySelector("#previous a")!=null&&(this.prevURL=n.querySelector("#previous a").href),n.querySelector("h1 a")!=null&&(this.title=n.querySelector("h1 a").innerHTML),this.tableOfContents=n.querySelector(".archives")!=null,n=null,this.staged=!1,this.current=!1}return e.TRANSITION="all 0.2s ease-out",e.CACHE={},e.fetchFromURL=function(t){var n;if(t==null||t===window.location)return null;if(e.CACHE[t]!=null)return e.CACHE[t];n=new XMLHttpRequest,n.open("GET",t,!1),n.send();if(n.status===200)return e.CACHE[t]=new e({html:n.response,href:t})},e.prototype.isCurrent=function(){return this.current},e.prototype.isStaged=function(){return this.staged},e.prototype.append=function(){var e;return this.translate(0),e=document.querySelector("body"),e.appendChild(this.element),this},e.prototype.remove=function(){return document.removeChild!=null&&this.element.parentNode!=null&&this.element.parentNode.removeChild(this.element),this},e.prototype.hide=function(){return this.element.className="hidden",this},e.prototype.stage=function(){return this.disableTransition(),this.element.className="post onStage",this.staged=!0,this.current=!1,this},e.prototype.unstage=function(){return this.disableTransition(),this.element.className="post offStage",this.staged=!1,this.current=!1,this},e.prototype.makeCurrent=function(){return this.tableOfContents?window.location="/":(this.disableTransition(),this.element.className="post",this.staged=!1,this.current=!0,document.querySelector("title").innerHTML=""+this.title+" | DontTrustThisGuy.com",window.location.href!==this.href&&history.pushState(null,"",this.href),this)},e.prototype.enableTransition=function(){return this.element.style[Modernizr.prefixed("transition")]=e.TRANSITION,this},e.prototype.disableTransition=function(){return this.element.style[Modernizr.prefixed("transition")]="",this},e.prototype.translate=function(e){return Modernizr.csstransforms3d?this.element.style[Modernizr.prefixed("transform")]="translate3d("+e+"px, 0, 0)":Modernizr.csstransforms&&(this.element.style[Modernizr.prefixed("transform")]="translate("+e+"px, 0)"),this},e}()}.call(this),function(){this.ArticleController=function(){function e(){var e=this;this.nextButton=new NavButton({element:document.querySelector("#next a"),direction:NavButton.DIRECTION_NEXT}),this.prevButton=new NavButton({element:document.querySelector("#previous a"),direction:NavButton.DIRECTION_PREV}),radio(NavButton.CLICK_EVENT).subscribe(function(t){return t===NavButton.DIRECTION_NEXT?e.nextArticle.tableOfContents?window.location="/":e.pageSlider.moveBackwardAnimated(!1):e.prevArticle.tableOfContents?window.location="/":e.pageSlider.moveForwardAnimated(!1)}),window.addEventListener("popstate",function(t){if(e.nextArticle.href===location.href)return e.pageSlider.moveBackwardAnimated(!1);if(e.prevArticle.href===location.href)return e.pageSlider.moveForwardAnimated(!1)}),this.setCurrentArticle(new Article({html:document.body.innerHTML,element:document.querySelector("article.post")}))}return e.prototype.setCurrentArticle=function(e){var t=this;return this.currentArticle=e,this.currentArticle.makeCurrent(),this.analyticsCallback!=null&&typeof this.analyticsCallback=="function"&&this.analyticsCallback({category:"articleChange",action:"asynchronous",pathname:location.pathname}),this.nextArticle=Article.fetchFromURL(this.currentArticle.nextURL),this.prevArticle=Article.fetchFromURL(this.currentArticle.prevURL),this.nextArticle!=null&&(this.nextArticle.unstage().append(),this.nextArticle.tableOfContents?this.nextButton.hide():this.nextButton.hidden()&&this.nextButton.show()),this.prevArticle!=null&&(this.prevArticle.unstage().append(),this.prevArticle.tableOfContents?this.prevButton.hide():this.prevButton.hidden()&&this.prevButton.show()),this.pageSlider!=null?this.pageSlider.setArticle(this.currentArticle):(this.pageSlider=new PageSlider({article:this.currentArticle}),radio(PageSlider.DIRECTION_CHANGE).subscribe(function(e){if(e===PageSlider.DIRECTION_RIGHT)return t.showNextArticle();if(e===PageSlider.DIRECTION_LEFT)return t.showPrevArticle()}),radio(PageSlider.DIRECTION_FINISHED).subscribe(function(e){if(e)return t.setStagedToCurrent()}))},e.prototype.setStagedToCurrent=function(){if(this.nextArticle.isStaged())return this.prevArticle.remove(),this.setCurrentArticle(this.nextArticle);if(this.prevArticle.isStaged())return this.nextArticle.remove(),this.setCurrentArticle(this.prevArticle)},e.prototype.showNextArticle=function(){this.nextArticle.stage();if(this.prevArticle!=null)return this.prevArticle.unstage()},e.prototype.showPrevArticle=function(){this.prevArticle.stage();if(this.nextArticle!=null)return this.nextArticle.unstage()},e.prototype.setAnalyticsCallback=function(e){return this.analyticsCallback=e,typeof this.analyticsCallback=="function"},e}()}.call(this),function(){this.NavButton=function(){function e(t){var n=this;t==null&&(t={}),this.element=t.element,this.direction=t.direction,this.element.addEventListener("click",function(t){t.preventDefault(),n.direction===e.DIRECTION_NEXT&&radio(e.CLICK_EVENT).broadcast(e.DIRECTION_NEXT);if(n.direction===e.DIRECTION_PREV)return radio(e.CLICK_EVENT).broadcast(e.DIRECTION_PREV)})}return e.DIRECTION_NEXT="NavButtonDirectionNext",e.DIRECTION_PREV="NavButtonDirectionPrev",e.CLICK_EVENT="NavButtonClickEvent",e.prototype.hidden=function(){return this.element.className==="hidden"},e.prototype.show=function(){return this.element.className="",this},e.prototype.hide=function(){return this.element.className="hidden",this},e}()}.call(this),function(){this.PageSlider=function(){function e(e){var t=this;e==null&&(e={}),this.touchTarget=e.touchTarget||document.body,this.setArticle(e.article),Modernizr.touch&&this.article!=null&&this.touchTarget!=null&&(this.touchTarget.addEventListener("touchstart",function(e){return t.touchStart(e)},!1),this.touchTarget.addEventListener("touchmove",function(e){return t.touchMove(e)},!1),this.touchTarget.addEventListener("touchend",function(e){return t.touchEnd(e)},!1),this.touchTarget.addEventListener("touchcancel",function(e){return t.touchCancel(e)},!1))}return e.DIRECTION_CHANGE="PageSlideDirectionChangeEvent",e.DIRECTION_FINISHED="PageSlideDirectionChangeFinished",e.DIRECTION_UNKNOWN=0,e.DIRECTION_LEFT=1,e.DIRECTION_RIGHT=2,e.prototype.setArticle=function(e){return this.article=e,this.slideTo=0,this.article.translate(this.slideTo)},e.prototype.touchStart=function(t){this.article.disableTransition();if(t.touches.length===1)return this.direction=e.DIRECTION_UNKNOWN,this.slideStartX=t.touches[0].pageX,this.slideStartY=t.touches[0].pageY},e.prototype.touchMove=function(t){var n,r;return t.touches.length===1?(n=Math.abs(t.touches[0].pageX-this.slideStartX),r=Math.abs(t.touches[0].pageY-this.slideStartY),n>10&&t.preventDefault(),n>r&&(this.slideTo=t.touches[0].pageX-this.slideStartX,this.slideTo>0&&this.direction!==e.DIRECTION_RIGHT?(this.direction=e.DIRECTION_RIGHT,radio(e.DIRECTION_CHANGE).broadcast(this.direction)):this.slideTo<0&&this.direction!==e.DIRECTION_LEFT&&(this.direction=e.DIRECTION_LEFT,radio(e.DIRECTION_CHANGE).broadcast(this.direction)))):this.slideTo=0,this.article.translate(this.slideTo)},e.prototype.touchEnd=function(e){var t;return t=window.innerWidth/3,this.slideTo>0&&Math.abs(this.slideTo)>=t?this.moveTo(window.innerWidth):this.slideTo<0&&Math.abs(this.slideTo)>=t?this.moveTo(-window.innerWidth):this.moveTo(0)},e.prototype.touchCancel=function(e){return this.moveTo(0)},e.prototype.moveTo=function(t){var n,r=this;return this.slideTo=t,this.article.enableTransition(),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},this.article.element.addEventListener(n[Modernizr.prefixed("transition")],function(){return radio(e.DIRECTION_FINISHED).broadcast(r.slideTo!==0)}),this.article.translate(this.slideTo)},e.prototype.moveForwardAnimated=function(t){return t==null&&(t=!0),this.direction=e.DIRECTION_LEFT,radio(e.DIRECTION_CHANGE).broadcast(this.direction),t?this.moveTo(window.innerWidth):radio(e.DIRECTION_FINISHED).broadcast(!0)},e.prototype.moveBackwardAnimated=function(t){return t==null&&(t=!0),this.direction=e.DIRECTION_RIGHT,radio(e.DIRECTION_CHANGE).broadcast(this.direction),t?this.moveTo(-window.innerWidth):radio(e.DIRECTION_FINISHED).broadcast(!0)},e}()}.call(this);