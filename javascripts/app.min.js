(function(){domready(function(){var a;setTimeout(function(){var a;if(Modernizr.svg){a=document.querySelector("#posts_nav");if(a!=null)return a.className="active"}},500);if(!document.querySelector(".archives"))return document.body.className="contained",a=new ArticleController,a.setAnalyticsCallback(function(a){return a==null&&(a={}),_gat._getTrackerByName()._trackPageview(a.pathname),_gat._getTrackerByName()._trackEvent(a.category,a.action)})})}).call(this),function(){this.Article=function(){function a(a){var b,c;a==null&&(a={}),this.href=a.href,c=document.createElement("div"),c.innerHTML=a.html,a.element!=null?this.element=a.element:this.element=c.querySelector("article"),b=this.element.querySelector("#table_of_contents"),b!=null&&(b.className="active"),c.querySelector("#next a")!=null&&(this.nextURL=c.querySelector("#next a").href),c.querySelector("#previous a")!=null&&(this.prevURL=c.querySelector("#previous a").href),c.querySelector("h1 a")!=null&&(this.title=c.querySelector("h1 a").innerHTML),this.tableOfContents=c.querySelector(".archives")!=null,c=null,this.staged=!1,this.current=!1}return a.TRANSITION="all 0.2s ease-out",a.CACHE={},a.fetchFromURL=function(b){var c;if(b==null||b===window.location)return null;if(a.CACHE[b]!=null)return a.CACHE[b];c=new XMLHttpRequest,c.open("GET",b,!1),c.send();if(c.status===200)return a.CACHE[b]=new a({html:c.response,href:b})},a.prototype.isCurrent=function(){return this.current},a.prototype.isStaged=function(){return this.staged},a.prototype.append=function(){var a;return this.translate(0),a=document.querySelector("body"),a.appendChild(this.element),this},a.prototype.remove=function(){return document.removeChild!=null&&this.element.parentNode!=null&&this.element.parentNode.removeChild(this.element),this},a.prototype.hide=function(){return this.element.className="hidden",this},a.prototype.stage=function(){return this.disableTransition(),this.element.className="post onStage",this.staged=!0,this.current=!1,this},a.prototype.unstage=function(){return this.disableTransition(),this.element.className="post offStage",this.staged=!1,this.current=!1,this},a.prototype.makeCurrent=function(){return this.tableOfContents?window.location="/":(this.disableTransition(),this.element.className="post",this.staged=!1,this.current=!0,document.querySelector("title").innerHTML=""+this.title+" | DontTrustThisGuy.com",window.location.href!==this.href&&history.pushState(null,"",this.href),this)},a.prototype.enableTransition=function(){return this.element.style[Modernizr.prefixed("transition")]=a.TRANSITION,this},a.prototype.disableTransition=function(){return this.element.style[Modernizr.prefixed("transition")]="",this},a.prototype.translate=function(a){return Modernizr.csstransforms3d?this.element.style[Modernizr.prefixed("transform")]="translate3d("+a+"px, 0, 0)":Modernizr.csstransforms&&(this.element.style[Modernizr.prefixed("transform")]="translate("+a+"px, 0)"),this},a}()}.call(this),function(){this.ArticleController=function(){function a(){var a=this;this.nextButton=new NavButton({element:document.querySelector("#next a"),direction:NavButton.DIRECTION_NEXT}),this.prevButton=new NavButton({element:document.querySelector("#previous a"),direction:NavButton.DIRECTION_PREV}),radio(NavButton.CLICK_EVENT).subscribe(function(b){return b===NavButton.DIRECTION_NEXT?a.nextArticle.tableOfContents?window.location="/":a.pageSlider.moveBackwardAnimated(!1):a.prevArticle.tableOfContents?window.location="/":a.pageSlider.moveForwardAnimated(!1)}),window.addEventListener("popstate",function(b){if(a.nextArticle.href===location.href)return a.pageSlider.moveBackwardAnimated(!1);if(a.prevArticle.href===location.href)return a.pageSlider.moveForwardAnimated(!1)}),this.setCurrentArticle(new Article({html:document.body.innerHTML,element:document.querySelector("article.post")}))}return a.prototype.setCurrentArticle=function(a){var b=this;return this.currentArticle=a,this.currentArticle.makeCurrent(),this.analyticsCallback!=null&&typeof this.analyticsCallback=="function"&&this.analyticsCallback({category:"articleChange",action:"asynchronous",pathname:location.pathname}),this.nextArticle=Article.fetchFromURL(this.currentArticle.nextURL),this.prevArticle=Article.fetchFromURL(this.currentArticle.prevURL),this.nextArticle!=null&&(this.nextArticle.unstage().append(),this.nextArticle.tableOfContents?this.nextButton.hide():this.nextButton.hidden()&&this.nextButton.show()),this.prevArticle!=null&&(this.prevArticle.unstage().append(),this.prevArticle.tableOfContents?this.prevButton.hide():this.prevButton.hidden()&&this.prevButton.show()),this.pageSlider!=null?this.pageSlider.setArticle(this.currentArticle):(this.pageSlider=new PageSlider({article:this.currentArticle}),radio(PageSlider.DIRECTION_CHANGE).subscribe(function(a){if(a===PageSlider.DIRECTION_RIGHT)return b.showNextArticle();if(a===PageSlider.DIRECTION_LEFT)return b.showPrevArticle()}),radio(PageSlider.DIRECTION_FINISHED).subscribe(function(a){if(a)return b.setStagedToCurrent()}))},a.prototype.setStagedToCurrent=function(){if(this.nextArticle.isStaged())return this.prevArticle.remove(),this.setCurrentArticle(this.nextArticle);if(this.prevArticle.isStaged())return this.nextArticle.remove(),this.setCurrentArticle(this.prevArticle)},a.prototype.showNextArticle=function(){this.nextArticle.stage();if(this.prevArticle!=null)return this.prevArticle.unstage()},a.prototype.showPrevArticle=function(){this.prevArticle.stage();if(this.nextArticle!=null)return this.nextArticle.unstage()},a.prototype.setAnalyticsCallback=function(a){return this.analyticsCallback=a,typeof this.analyticsCallback=="function"},a}()}.call(this),function(){this.NavButton=function(){function a(b){var c=this;b==null&&(b={}),this.element=b.element,this.direction=b.direction,this.element.addEventListener("click",function(b){b.preventDefault(),c.direction===a.DIRECTION_NEXT&&radio(a.CLICK_EVENT).broadcast(a.DIRECTION_NEXT);if(c.direction===a.DIRECTION_PREV)return radio(a.CLICK_EVENT).broadcast(a.DIRECTION_PREV)})}return a.DIRECTION_NEXT="NavButtonDirectionNext",a.DIRECTION_PREV="NavButtonDirectionPrev",a.CLICK_EVENT="NavButtonClickEvent",a.prototype.hidden=function(){return this.element.className==="hidden"},a.prototype.show=function(){return this.element.className="",this},a.prototype.hide=function(){return this.element.className="hidden",this},a}()}.call(this),function(){this.PageSlider=function(){function a(a){var b=this;a==null&&(a={}),this.touchTarget=a.touchTarget||document.body,this.setArticle(a.article),Modernizr.touch&&this.article!=null&&this.touchTarget!=null&&(this.touchTarget.addEventListener("touchstart",function(a){return b.touchStart(a)},!1),this.touchTarget.addEventListener("touchmove",function(a){return b.touchMove(a)},!1),this.touchTarget.addEventListener("touchend",function(a){return b.touchEnd(a)},!1),this.touchTarget.addEventListener("touchcancel",function(a){return b.touchCancel(a)},!1))}return a.DIRECTION_CHANGE="PageSlideDirectionChangeEvent",a.DIRECTION_FINISHED="PageSlideDirectionChangeFinished",a.DIRECTION_UNKNOWN=0,a.DIRECTION_LEFT=1,a.DIRECTION_RIGHT=2,a.prototype.setArticle=function(a){return this.article=a,this.slideTo=0,this.article.translate(this.slideTo)},a.prototype.touchStart=function(b){this.article.disableTransition();if(b.touches.length===1)return this.direction=a.DIRECTION_UNKNOWN,this.slideStartX=b.touches[0].pageX,this.slideStartY=b.touches[0].pageY},a.prototype.touchMove=function(b){var c,d;return b.touches.length===1?(c=Math.abs(b.touches[0].pageX-this.slideStartX),d=Math.abs(b.touches[0].pageY-this.slideStartY),c>10&&b.preventDefault(),c>d&&(this.slideTo=b.touches[0].pageX-this.slideStartX,this.slideTo>0&&this.direction!==a.DIRECTION_RIGHT?(this.direction=a.DIRECTION_RIGHT,radio(a.DIRECTION_CHANGE).broadcast(this.direction)):this.slideTo<0&&this.direction!==a.DIRECTION_LEFT&&(this.direction=a.DIRECTION_LEFT,radio(a.DIRECTION_CHANGE).broadcast(this.direction)))):this.slideTo=0,this.article.translate(this.slideTo)},a.prototype.touchEnd=function(a){var b;return b=window.innerWidth/3,this.slideTo>0&&Math.abs(this.slideTo)>=b?this.moveTo(window.innerWidth):this.slideTo<0&&Math.abs(this.slideTo)>=b?this.moveTo(-window.innerWidth):this.moveTo(0)},a.prototype.touchCancel=function(a){return this.moveTo(0)},a.prototype.moveTo=function(b){var c,d=this;return this.slideTo=b,this.article.enableTransition(),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},this.article.element.addEventListener(c[Modernizr.prefixed("transition")],function(){return radio(a.DIRECTION_FINISHED).broadcast(d.slideTo!==0)}),this.article.translate(this.slideTo)},a.prototype.moveForwardAnimated=function(b){return b==null&&(b=!0),this.direction=a.DIRECTION_LEFT,radio(a.DIRECTION_CHANGE).broadcast(this.direction),b?this.moveTo(window.innerWidth):radio(a.DIRECTION_FINISHED).broadcast(!0)},a.prototype.moveBackwardAnimated=function(b){return b==null&&(b=!0),this.direction=a.DIRECTION_RIGHT,radio(a.DIRECTION_CHANGE).broadcast(this.direction),b?this.moveTo(-window.innerWidth):radio(a.DIRECTION_FINISHED).broadcast(!0)},a}()}.call(this)